<!doctype html>
<html>
  {{> head title="REPORT.COMPARE_INVOICED_RECEIVED.TITLE"}}
  <body>
  <div class="container">
    {{> header}}

    <!-- body -->
    <div class="row">
      <div class="col-xs-12">
        <!-- page title  -->
        <h3 class="text-center text-uppercase">
          <strong>{{translate 'REPORT.COMPARE_INVOICED_RECEIVED.TITLE'}}</strong>
        </h3>

        <h4 class="text-center"><strong>{{ patient.reference }} | {{ patient.display_name }}</strong></h4>
        <h4 class="text-center"><strong>{{ patient.debtor_group_name }} ({{ patient.number }})</strong></h4>

        <h4 class="text-center">
          <strong class="text-capitalize">{{date period.dateFrom }}</strong>
           -
          <strong class="text-capitalize">{{date period.dateTo }}</strong>
        </h4>

        <table style="page-break-after: always; width: 100%; margin-right: auto; margin-left: auto" class="table table-striped table-condensed table-report table-bordered">
          <thead>
            <tr style="background-color:#efefef; font-size:84%;"> 
              <th style="width: 28%;" class="text-uppercase text-center text-bold">
                {{translate 'TABLE.COLUMNS.ITEM'}}
              </th>
              <th style="width: 12%;" class="text-uppercase text-center">
                {{translate 'TABLE.COLUMNS.QUANTITY_INVOICED'}}
              </th>
              <th style="width: 12%;" class="text-uppercase text-center">
                {{translate 'TABLE.COLUMNS.PRICE_INVOICED'}}
              </th>
              <th style="width: 12%;" class="text-uppercase text-center">
                {{translate 'TABLE.COLUMNS.QUANTITY_DISTRIBUTED'}}
              </th>
              <th style="width: 12%;" class="text-uppercase text-center">
                {{translate 'TABLE.COLUMNS.COST_DISTRIBUTED'}}
              </th>
              <th style="width: 12%;" class="text-uppercase text-center">
                {{translate 'TABLE.COLUMNS.QUANTITY_DIFFERENCE'}}
              </th>
              <th style="width: 12%;" class="text-uppercase text-center">
                {{translate 'TABLE.COLUMNS.COST_DIFFERENCE'}}
              </th>
            </tr>
          </thead>
          <tbody>
            {{#each invoices}}
            <tr>
              <td class="text-uppercase text-bold" style="background-color:#cfcfcf;"  colspan="7">
                {{ text }} | {{ timestamp date }}
              </td>
            </tr>

            {{#each inventories}}
              <tr>
                <td> {{ inventory_text }} </td>
                <td class="text-right"> {{ quantity_invoiced }} </td>
                <td class="text-right"> {{ debcred price_invoiced ../../metadata.enterprise.currency_id }} </td>
                <td class="text-right"> {{ quantity_distributed }} </td>
                <td class="text-right"> {{ debcred cost_distributed ../../metadata.enterprise.currency_id }} </td>
                <td class="text-right"> <strong> {{ lessZero quantity_difference }} </strong></td>
                <td class="text-right"> <strong> {{ debcred cost_difference ../../metadata.enterprise.currency_id }} </strong></td>
              </tr>
            {{/each}}
            {{#if emptyInvoice }}
              <tr>
                <td colspan="7"> {{translate 'FORM.INFO.THIS_INVOICE_NO_STOCK'}} </td>
              </tr>
            {{/if}}
            <tr>
              <td colspan="7"></td>
            </tr>
            <tr>
              <td colspan="7"></td>
            </tr>
            {{else}}
              {{>emptyTable columns=7}}      
            {{/each}}
          </tbody>
        </table>
        <br>
        <br>
        <br>
        <table style="page-break-after: always; width: 100%; margin-right: auto; margin-left: auto" class="table table-striped table-condensed table-report table-bordered">
          <thead>
            <tr style="background-color:#efefef; font-size:84%;"> 
              <th style="width: 28%;" class="text-uppercase text-center text-bold">
                {{translate 'TABLE.COLUMNS.ITEM'}}
              </th>
              <th style="width: 18%;" class="text-uppercase text-center">
                {{translate 'TABLE.COLUMNS.DATE'}}
              </th>
              <th style="width: 18%;" class="text-uppercase text-center">
                {{translate 'TABLE.COLUMNS.QUANTITY'}}
              </th>
              <th style="width: 18%;" class="text-uppercase text-center">
                {{translate 'TABLE.COLUMNS.VALUE'}}
              </th>
              <th style="width: 18%;" class="text-uppercase text-center">
                {{translate 'TABLE.COLUMNS.TOTAL'}}
              </th>
            </tr>
          </thead>
          <tbody>
            {{#each noInvoiceAttributionAggregat}}
            <tr>
              <td class="text-uppercase text-bold" style="background-color:#cfcfcf;"  colspan="5">
                {{ document }}
              </td>
            </tr>
            {{#each inventories}}
              <tr>
                <td> {{ inventory_text }} </td>
                <td> {{ timestamp date }} </td>
                <td class="text-right"> {{ quantity }} </td>
                <td class="text-right"> {{ debcred unit_cost ../../metadata.enterprise.currency_id }} </td>
                <td class="text-right"> <strong>{{ debcred total_cost ../../metadata.enterprise.currency_id }}</strong> </td>              
              </tr>
            {{/each}}
            <tr style="background-color:#efefef;">
              <td colspan="4" class="text-right"><strong>{{translate 'TABLE.COLUMNS.TOTAL'}}</strong></td>
              <td class="text-right"><strong> {{ debcred total_movement ../../metadata.enterprise.currency_id }}  </strong></td>
            </tr>  
            <tr>
              <td colspan="5"></td>
            </tr>
            <tr>
              <td colspan="5"></td>
            </tr>            
          </tbody>
          {{else}}
              {{>emptyTable columns=5}}               
          {{/each}}
        </table>
      </div>
    </div>
  </div>

</body>
</html>